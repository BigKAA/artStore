# ==============================================================================
# ArtStore - Docker Compose файл
# ==============================================================================
#
# КОНФИГУРАЦИЯ:
#   - 3 Storage Elements x 1GB каждый
#   - se-01: APP_MODE=edit, PRIORITY=100 (первый для заполнения)
#   - se-02: APP_MODE=edit, PRIORITY=200 (второй для заполнения)
#   - se-03: APP_MODE=rw, PRIORITY=300 (fallback для finalized файлов)
#
# Использование:
#   docker-compose -f docker-compose.yml up -d
#   docker-compose -f docker-compose.yml logs -f
#   docker-compose -f docker-compose.yml down -v
#
# ВАЖНО: Запускать из корня проекта /home/artur/Projects/artStore
# ==============================================================================

version: '3.8'

# ==============================================================================
# INFRASTRUCTURE SERVICES (без изменений)
# ==============================================================================
services:
  # PostgreSQL 15 - Primary Database
  postgres:
    image: postgres:15
    container_name: artstore_postgres
    restart: unless-stopped
    environment:
      POSTGRES_USER: ${DB_USERNAME:-artstore}
      POSTGRES_PASSWORD: ${DB_PASSWORD:-password}
      POSTGRES_DB: artstore
      POSTGRES_HOST_AUTH_METHOD: ${POSTGRES_AUTH_METHOD:-md5}
    ports:
      - "${DB_PORT:-5432}:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
    networks:
      - artstore_network
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U ${DB_USERNAME:-artstore} -d artstore"]
      interval: 10s
      timeout: 5s
      retries: 5
      start_period: 30s

  # Redis 7 - Service Discovery & Caching
  redis:
    image: redis:7-alpine
    container_name: artstore_redis
    restart: unless-stopped
    ports:
      - "${REDIS_PORT:-6379}:6379"
    volumes:
      - redis_data:/data
    networks:
      - artstore_network
    healthcheck:
      test: ["CMD", "redis-cli", "--raw", "incr", "ping"]
      interval: 10s
      timeout: 3s
      retries: 5
      start_period: 10s

  # MinIO - S3-Compatible Object Storage
  minio:
    image: quay.io/minio/minio:RELEASE.2025-04-22T22-12-26Z
    container_name: artstore_minio
    restart: unless-stopped
    environment:
      MINIO_ROOT_USER: ${MINIO_ROOT_USER:-minioadmin}
      MINIO_ROOT_PASSWORD: ${MINIO_ROOT_PASSWORD:-minioadmin}
    ports:
      - "9000:9000"
      - "9001:9001"
    volumes:
      - minio_data:/data
    command: server /data --console-address ":9001"
    networks:
      - artstore_network
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:9000/minio/health/live"]
      interval: 30s
      timeout: 20s
      retries: 3
      start_period: 60s

# ==============================================================================
# BACKEND SERVICES
# ==============================================================================

  # Admin Module - Authentication & Management Center
  admin-module:
    build:
      context: ./admin-module
      dockerfile: Dockerfile
    container_name: artstore_admin_module
    restart: unless-stopped
    ports:
      - "8000:8000"
    environment:
      # Application
      APP_NAME: artstore-admin-module
      APP_DEBUG: "on"
      APP_SWAGGER_ENABLED: "on"
      LOG_LEVEL: ${LOG_LEVEL:-INFO}
      LOG_FORMAT: json

      # Database
      DB_HOST: postgres
      DB_PORT: 5432
      DB_USERNAME: ${DB_USERNAME:-artstore}
      DB_PASSWORD: ${DB_PASSWORD:-password}
      DB_DATABASE: artstore_admin
      DB_POOL_SIZE: 10
      DB_MAX_OVERFLOW: 20

      # PostgreSQL SSL (optional)
      DB_SSL_ENABLED: ${DB_SSL_ENABLED:-off}

      # Redis
      REDIS_URL: redis://redis:6379/0

      # JWT (Hot-Reload enabled via file paths)
      JWT_ALGORITHM: RS256
      JWT_ACCESS_TOKEN_EXPIRE_MINUTES: 30
      JWT_PRIVATE_KEY_PATH: /app/keys/private_key.pem
      JWT_PUBLIC_KEY_PATH: /app/keys/public_key.pem

      # Security
      SECURITY_AUDIT_HMAC_SECRET: "test-hmac-secret-for-development-32chars-minimum"

      # Initial System Account
      INITIAL_ACCOUNT_ENABLED: "on"
      INITIAL_ACCOUNT_NAME: admin-service
      INITIAL_ACCOUNT_ROLE: ADMIN
      INITIAL_ACCOUNT_PASSWORD: Test-Password123

      # Event Publishing (PHASE 1: Query Module Sync)
      # PHASE 2: Миграция на Redis Streams для guaranteed delivery
      EVENT_PUBLISH_ENABLED: "on"

      # Redis Streams configuration (PHASE 2)
      EVENT_STREAM_NAME: file-events
      EVENT_STREAM_MAXLEN: 10000
      EVENT_STREAM_RETENTION_HOURS: 24

      # Legacy Pub/Sub channels (deprecated, сохранены для backwards compatibility)
      EVENT_CHANNEL_FILE_CREATED: "file:created"
      EVENT_CHANNEL_FILE_UPDATED: "file:updated"
      EVENT_CHANNEL_FILE_DELETED: "file:deleted"
      EVENT_PUBLISH_TIMEOUT: 5

      # Scheduler
      SCHEDULER_ENABLED: "on"
      SCHEDULER_TIMEZONE: "UTC"
      SCHEDULER_JWT_ROTATION_ENABLED: "on"
      SCHEDULER_JWT_ROTATION_INTERVAL_HOURS: 24
      SCHEDULER_STORAGE_HEALTH_CHECK_ENABLED: "on"
      SCHEDULER_STORAGE_HEALTH_CHECK_INTERVAL_SECONDS: 60
    volumes:
      - ./admin-module/keys:/app/keys:ro
      - admin_logs:/app/logs
      - type: tmpfs
        target: /tmp
    networks:
      - artstore_network
    depends_on:
      postgres:
        condition: service_healthy
      redis:
        condition: service_healthy
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8000/health/live"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 60s

  # ===========================================================================
  # STORAGE ELEMENT 01 - EDIT MODE, PRIORITY=100, MAX_SIZE=1GB
  # ===========================================================================
  # Первый SE для заполнения (Sequential Fill Algorithm)
  # ===========================================================================
  storage-element-01:
    build:
      context: ./storage-element
      dockerfile: Dockerfile
    container_name: artstore_storage_element_01
    restart: unless-stopped
    ports:
      - "8010:8000"
    environment:
      # Application
      APP_NAME: artstore-storage-element-01
      APP_MODE: edit  # EDIT режим для новых файлов
      APP__SWAGGER_ENABLED: "on"
      LOG_LEVEL: ${LOG_LEVEL:-DEBUG}
      LOG_FORMAT: json

      # Storage Configuration - ТЕСТОВЫЙ РАЗМЕР 1GB
      STORAGE_TYPE: s3
      # Единый параметр размера хранилища (в байтах)
      # 1 GB = 1073741824
      STORAGE_MAX_SIZE: 1073741824

      # Health Reporting Settings
      STORAGE_ELEMENT_ID: se-01
      STORAGE_PRIORITY: 100  # Наивысший приоритет
      STORAGE_EXTERNAL_ENDPOINT: http://storage-element-01:8000
      HEALTH_REPORT_INTERVAL: 30
      HEALTH_REPORT_TTL_MULTIPLIER: 3

      # Adaptive Capacity Thresholds
      CAPACITY_WARNING_THRESHOLD: 85
      CAPACITY_CRITICAL_THRESHOLD: 92
      CAPACITY_FULL_THRESHOLD: 98

      # Local Filesystem
      STORAGE_LOCAL_BASE_PATH: /app/.data/storage

      # S3 Configuration
      STORAGE_S3_ENDPOINT_URL: http://minio:9000
      STORAGE_S3_ACCESS_KEY_ID: minioadmin
      STORAGE_S3_SECRET_ACCESS_KEY: minioadmin
      STORAGE_S3_BUCKET_NAME: artstore-files
      STORAGE_S3_REGION: us-east-1
      STORAGE_S3_APP_FOLDER: storage_element_01

      # JWT Authentication
      JWT_PUBLIC_KEY_PATH: /app/keys/public_key.pem
      JWT_ALGORITHM: RS256

      # Service Account для взаимодействия с Admin Module
      SERVICE_ACCOUNT_CLIENT_ID: sa_prod_admin_service_11710636
      SERVICE_ACCOUNT_CLIENT_SECRET: "Test-Password123"
      SERVICE_ACCOUNT_ADMIN_MODULE_URL: http://admin-module:8000

      # Database
      DATABASE_URL: postgresql+asyncpg://${DB_USERNAME:-artstore}:${DB_PASSWORD:-password}@postgres:5432/artstore
      DB_HOST: postgres
      DB_PORT: 5432
      DB_USERNAME: ${DB_USERNAME:-artstore}
      DB_PASSWORD: ${DB_PASSWORD:-password}
      DB_DATABASE: artstore
      DB_TABLE_PREFIX: storage_elem_01

      # PostgreSQL SSL
      DB_SSL_ENABLED: ${DB_SSL_ENABLED:-off}

      # Redis
      REDIS_HOST: redis
      REDIS_PORT: 6379
      REDIS_DB: 0
      REDIS_POOL_SIZE: 10

      # WAL
      WAL_ENABLED: "on"
      WAL_RETENTION_HOURS: 24
    volumes:
      - ./storage-element/keys:/app/keys:ro
      - storage_data_01:/app/.data/storage
      - storage_logs_01:/app/logs
      - type: tmpfs
        target: /tmp
    networks:
      - artstore_network
    depends_on:
      postgres:
        condition: service_healthy
      redis:
        condition: service_healthy
      minio:
        condition: service_healthy
      admin-module:
        condition: service_healthy
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8000/health/live"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 60s

  # ===========================================================================
  # STORAGE ELEMENT 02 - EDIT MODE, PRIORITY=200, MAX_SIZE=1GB
  # ===========================================================================
  # Второй SE для заполнения после se-01
  # Использует тот же image что и storage-element-01
  # ===========================================================================
  storage-element-02:
    image: artstore_storage-element-01:latest
    depends_on:
      storage-element-01:
        condition: service_healthy
    container_name: artstore_storage_element_02
    restart: unless-stopped
    ports:
      - "8011:8000"
    environment:
      # Application
      APP_NAME: artstore-storage-element-02
      APP_MODE: edit  # EDIT режим для новых файлов
      APP__SWAGGER_ENABLED: "on"
      LOG_LEVEL: ${LOG_LEVEL:-DEBUG}
      LOG_FORMAT: json

      # Storage Configuration - ТЕСТОВЫЙ РАЗМЕР 1GB
      STORAGE_TYPE: s3
      # Единый параметр размера хранилища (в байтах)
      # 1 GB = 1073741824
      STORAGE_MAX_SIZE: 1073741824

      # Health Reporting Settings
      STORAGE_ELEMENT_ID: se-02
      STORAGE_PRIORITY: 200  # Средний приоритет
      STORAGE_EXTERNAL_ENDPOINT: http://storage-element-02:8000
      HEALTH_REPORT_INTERVAL: 30
      HEALTH_REPORT_TTL_MULTIPLIER: 3

      # Adaptive Capacity Thresholds
      CAPACITY_WARNING_THRESHOLD: 85
      CAPACITY_CRITICAL_THRESHOLD: 92
      CAPACITY_FULL_THRESHOLD: 98

      # Local Filesystem
      STORAGE_LOCAL_BASE_PATH: /app/.data/storage

      # S3 Configuration
      STORAGE_S3_ENDPOINT_URL: http://minio:9000
      STORAGE_S3_ACCESS_KEY_ID: minioadmin
      STORAGE_S3_SECRET_ACCESS_KEY: minioadmin
      STORAGE_S3_BUCKET_NAME: artstore-files
      STORAGE_S3_REGION: us-east-1
      STORAGE_S3_APP_FOLDER: storage_element_02

      # JWT Authentication
      JWT_PUBLIC_KEY_PATH: /app/keys/public_key.pem
      JWT_ALGORITHM: RS256

      # Service Account для взаимодействия с Admin Module
      SERVICE_ACCOUNT_CLIENT_ID: sa_prod_admin_service_11710636
      SERVICE_ACCOUNT_CLIENT_SECRET: "Test-Password123"
      SERVICE_ACCOUNT_ADMIN_MODULE_URL: http://admin-module:8000

      # Database
      DATABASE_URL: postgresql+asyncpg://${DB_USERNAME:-artstore}:${DB_PASSWORD:-password}@postgres:5432/artstore
      DB_HOST: postgres
      DB_PORT: 5432
      DB_USERNAME: ${DB_USERNAME:-artstore}
      DB_PASSWORD: ${DB_PASSWORD:-password}
      DB_DATABASE: artstore
      DB_TABLE_PREFIX: storage_elem_02

      # PostgreSQL SSL
      DB_SSL_ENABLED: ${DB_SSL_ENABLED:-off}

      # Redis
      REDIS_HOST: redis
      REDIS_PORT: 6379
      REDIS_DB: 0
      REDIS_POOL_SIZE: 10

      # WAL
      WAL_ENABLED: "on"
      WAL_RETENTION_HOURS: 24
    volumes:
      - ./storage-element/keys:/app/keys:ro
      - storage_data_02:/app/.data/storage
      - storage_logs_02:/app/logs
      - type: tmpfs
        target: /tmp
    networks:
      - artstore_network
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8000/health/live"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 60s

  # ===========================================================================
  # STORAGE ELEMENT 03 - RW MODE, PRIORITY=300, MAX_SIZE=1GB
  # ===========================================================================
  # Третий SE в RW режиме для finalized файлов
  # Использует тот же image что и storage-element-01
  # ===========================================================================
  storage-element-03:
    image: artstore_storage-element-01:latest
    depends_on:
      storage-element-01:
        condition: service_healthy
    container_name: artstore_storage_element_03
    restart: unless-stopped
    ports:
      - "8012:8000"
    environment:
      # Application
      APP_NAME: artstore-storage-element-03
      APP_MODE: rw  # RW режим для finalized файлов
      APP__SWAGGER_ENABLED: "on"
      LOG_LEVEL: ${LOG_LEVEL:-DEBUG}
      LOG_FORMAT: json

      # Storage Configuration - ТЕСТОВЫЙ РАЗМЕР 1GB
      STORAGE_TYPE: s3
      # Единый параметр размера хранилища (в байтах)
      # 1 GB = 1073741824
      STORAGE_MAX_SIZE: 1073741824

      # Health Reporting Settings
      STORAGE_ELEMENT_ID: se-03
      STORAGE_PRIORITY: 300  # Низший приоритет (fallback)
      STORAGE_EXTERNAL_ENDPOINT: http://storage-element-03:8000
      HEALTH_REPORT_INTERVAL: 30
      HEALTH_REPORT_TTL_MULTIPLIER: 3

      # Adaptive Capacity Thresholds
      CAPACITY_WARNING_THRESHOLD: 85
      CAPACITY_CRITICAL_THRESHOLD: 92
      CAPACITY_FULL_THRESHOLD: 98

      # Local Filesystem
      STORAGE_LOCAL_BASE_PATH: /app/.data/storage

      # S3 Configuration
      STORAGE_S3_ENDPOINT_URL: http://minio:9000
      STORAGE_S3_ACCESS_KEY_ID: minioadmin
      STORAGE_S3_SECRET_ACCESS_KEY: minioadmin
      STORAGE_S3_BUCKET_NAME: artstore-files
      STORAGE_S3_REGION: us-east-1
      STORAGE_S3_APP_FOLDER: storage_element_03

      # JWT Authentication
      JWT_PUBLIC_KEY_PATH: /app/keys/public_key.pem
      JWT_ALGORITHM: RS256

      # Service Account для взаимодействия с Admin Module
      SERVICE_ACCOUNT_CLIENT_ID: sa_prod_admin_service_11710636
      SERVICE_ACCOUNT_CLIENT_SECRET: "Test-Password123"
      SERVICE_ACCOUNT_ADMIN_MODULE_URL: http://admin-module:8000

      # Database
      DATABASE_URL: postgresql+asyncpg://${DB_USERNAME:-artstore}:${DB_PASSWORD:-password}@postgres:5432/artstore
      DB_HOST: postgres
      DB_PORT: 5432
      DB_USERNAME: ${DB_USERNAME:-artstore}
      DB_PASSWORD: ${DB_PASSWORD:-password}
      DB_DATABASE: artstore
      DB_TABLE_PREFIX: storage_elem_03

      # PostgreSQL SSL
      DB_SSL_ENABLED: ${DB_SSL_ENABLED:-off}

      # Redis
      REDIS_HOST: redis
      REDIS_PORT: 6379
      REDIS_DB: 0
      REDIS_POOL_SIZE: 10

      # WAL
      WAL_ENABLED: "on"
      WAL_RETENTION_HOURS: 24
    volumes:
      - ./storage-element/keys:/app/keys:ro
      - storage_data_03:/app/.data/storage
      - storage_logs_03:/app/logs
      - type: tmpfs
        target: /tmp
    networks:
      - artstore_network
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8000/health/live"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 60s

  # Ingester Module - File Upload Management
  ingester-module:
    build:
      context: ./ingester-module
      dockerfile: Dockerfile
    container_name: artstore_ingester_module
    restart: unless-stopped
    ports:
      - "8020:8020"
    environment:
      # Application
      APP_NAME: artstore-ingester-module
      APP_SWAGGER_ENABLED: "on"
      LOG_LEVEL: ${LOG_LEVEL:-DEBUG}
      LOG_FORMAT: json

      # Upload Limits
      MAX_FILE_SIZE_MB: 1024
      MAX_BATCH_FILES: 100
      CHUNK_SIZE_MB: 10

      # Compression
      COMPRESSION_ENABLED: "on"
      COMPRESSION_MIN_SIZE_MB: 10

      # Redis (Service Discovery)
      REDIS_URL: redis://redis:6379/0
      REDIS_HOST: redis
      REDIS_PORT: 6379
      REDIS_DB: 0
      SERVICE_DISCOVERY_CHANNEL: artstore:storage-elements

      # Circuit Breaker
      CIRCUIT_BREAKER_ENABLED: "on"
      CIRCUIT_BREAKER_FAILURE_THRESHOLD: 5

      # Sprint 21: AdaptiveCapacityMonitor SE Config Reload
      # Periodic Reload: background task обновляет SE endpoints каждые N секунд
      # Lazy Reload: немедленное обновление при ошибках (507, 404, connection errors)
      CAPACITY_MONITOR_CONFIG_RELOAD_ENABLED: "on"
      CAPACITY_MONITOR_CONFIG_RELOAD_INTERVAL: 60  # секунды (диапазон: 10-600)

      # Sprint 16: Storage Element через Service Discovery (base_url удалён)
      # Endpoints выбираются динамически: Redis → Admin Module fallback
      STORAGE_ELEMENT_TIMEOUT: 30
      STORAGE_ELEMENT_MAX_RETRIES: 3
      STORAGE_ELEMENT_CONNECTION_POOL_SIZE: 100

      # Auth settings для Admin Module health checks
      AUTH_ADMIN_MODULE_URL: http://admin-module:8000

      # Service Account для аутентификации с Admin Module
      SERVICE_ACCOUNT_CLIENT_ID: sa_prod_admin_service_11710636
      SERVICE_ACCOUNT_CLIENT_SECRET: "Test-Password123"
      SERVICE_ACCOUNT_ADMIN_MODULE_URL: http://admin-module:8000

      # JWT для валидации входящих запросов
      JWT_PUBLIC_KEY_PATH: /app/keys/public_key.pem
      JWT_ALGORITHM: RS256
    volumes:
      - ./ingester-module/keys:/app/keys:ro
      - ingester_logs:/app/logs
      - type: tmpfs
        target: /tmp
    networks:
      - artstore_network
    depends_on:
      redis:
        condition: service_healthy
      admin-module:
        condition: service_healthy
    healthcheck:
      # Sprint 16: Стандартизированный health endpoint (без /api/v1)
      test: ["CMD", "curl", "-f", "http://localhost:8020/health/live"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 60s

  # Query Module - File Search & Download
  query-module:
    build:
      context: ./query-module
      dockerfile: Dockerfile
    container_name: artstore_query_module
    restart: unless-stopped
    ports:
      - "8030:8030"
    environment:
      # Application
      APP_NAME: artstore-query-module
      APP_SWAGGER_ENABLED: "on"
      LOG_LEVEL: ${LOG_LEVEL:-DEBUG}
      LOG_FORMAT: json

      # Database (унифицированный префикс DB_*)
      DB_HOST: postgres
      DB_PORT: 5432
      DB_USERNAME: ${DB_USERNAME:-artstore}
      DB_PASSWORD: ${DB_PASSWORD:-password}
      DB_DATABASE: artstore_query

      # PostgreSQL SSL
      DB_SSL_ENABLED: ${DB_SSL_ENABLED:-off}

      # Redis (PHASE 2: Same DB as Admin Module for Pub/Sub sync)
      REDIS_URL: redis://redis:6379/0
      REDIS_HOST: redis
      REDIS_PORT: 6379
      REDIS_DB: 0
      SERVICE_DISCOVERY_CHANNEL: artstore:storage-elements

      # Caching
      LOCAL_CACHE_SIZE: 1000
      LOCAL_CACHE_TTL_SECONDS: 60
      REDIS_CACHE_TTL_SECONDS: 300

      # Search
      SEARCH_DEFAULT_PAGE_SIZE: 50
      SEARCH_MAX_PAGE_SIZE: 1000

      # Circuit Breaker
      CIRCUIT_BREAKER_ENABLED: "on"

      # Event Subscription (PHASE 2: Query Module Sync)
      # PHASE 3: Миграция на Redis Streams для guaranteed delivery
      EVENT_SUBSCRIBE_ENABLED: "on"

      # Redis Streams Consumer configuration (PHASE 3)
      EVENT_STREAM_NAME: file-events
      EVENT_CONSUMER_GROUP: query-module-consumers
      EVENT_CONSUMER_BATCH_SIZE: 10
      EVENT_CONSUMER_BLOCK_MS: 5000
      EVENT_PENDING_RETRY_MS: 60000
      EVENT_PENDING_CHECK_INTERVAL: 30

      # Legacy Pub/Sub channels (deprecated, сохранены для backwards compatibility)
      EVENT_CHANNEL_FILE_CREATED: "file:created"
      EVENT_CHANNEL_FILE_UPDATED: "file:updated"
      EVENT_CHANNEL_FILE_DELETED: "file:deleted"
    volumes:
      - ./query-module/keys:/app/keys:ro
      - query_logs:/app/logs
      - type: tmpfs
        target: /tmp
    networks:
      - artstore_network
    depends_on:
      postgres:
        condition: service_healthy
      redis:
        condition: service_healthy
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8030/health/live"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 60s

# ==============================================================================
# NETWORKS
# ==============================================================================
networks:
  artstore_network:
    name: artstore_network
    driver: bridge
    ipam:
      config:
        - subnet: 172.28.0.0/16

# ==============================================================================
# VOLUMES
# ==============================================================================
volumes:
  # Infrastructure
  postgres_data:
    name: artstore_postgres_data
  redis_data:
    name: artstore_redis_data
  minio_data:
    name: artstore_minio_data

  # Admin Module
  admin_logs:
    name: artstore_admin_logs

  # Storage Element 01
  storage_data_01:
    name: artstore_storage_data_01
  storage_logs_01:
    name: artstore_storage_logs_01

  # Storage Element 02
  storage_data_02:
    name: artstore_storage_data_02
  storage_logs_02:
    name: artstore_storage_logs_02

  # Storage Element 03 (NEW)
  storage_data_03:
    name: artstore_storage_data_03
  storage_logs_03:
    name: artstore_storage_logs_03

  # Ingester Module
  ingester_logs:
    name: artstore_ingester_logs

  # Query Module
  query_logs:
    name: artstore_query_logs
