---
# ВАЖНО: Скопировать этот файл в secrets.yaml и изменить все значения перед применением!
# cp secrets.yaml.example secrets.yaml
# vim secrets.yaml
# kubectl apply -f secrets.yaml

apiVersion: v1
kind: Secret
metadata:
  name: artstore-secrets
  namespace: artstore
type: Opaque
stringData:
  # PostgreSQL credentials
  POSTGRES_USER: "artstore"
  POSTGRES_PASSWORD: "CHANGE_ME_artstore_password_2025"  # ОБЯЗАТЕЛЬНО изменить!
  POSTGRES_DB: "artstore"

  # Redis (пароль опционален, но рекомендуется в production)
  REDIS_PASSWORD: ""  # Оставить пустым или установить для Redis AUTH

  # MinIO S3-compatible storage credentials
  MINIO_ROOT_USER: "minioadmin"
  MINIO_ROOT_PASSWORD: "CHANGE_ME_minio_password_2025"  # ОБЯЗАТЕЛЬНО изменить!
  MINIO_BUCKET_NAME: "artstore-files"

  # OAuth 2.0 Initial Service Account (auto-created on first startup)
  INITIAL_ACCOUNT_ENABLED: "true"
  INITIAL_ACCOUNT_NAME: "admin-service"
  INITIAL_CLIENT_ID: "00000000-0000-0000-0000-000000000001"  # Можно изменить или оставить auto-generation
  INITIAL_CLIENT_SECRET: "CHANGE_ME_client_secret_min_32_chars_2025"  # ОБЯЗАТЕЛЬНО изменить! Минимум 32 символа
  INITIAL_ACCOUNT_ROLE: "ADMIN"
  INITIAL_ACCOUNT_DESCRIPTION: "System administrative service account"

  # JWT RS256 Keys (ОБЯЗАТЕЛЬНО сгенерировать новые ключи!)
  # Генерация ключей:
  # openssl genrsa -out jwt_private_key.pem 2048
  # openssl rsa -in jwt_private_key.pem -pubout -out jwt_public_key.pem
  # cat jwt_private_key.pem (скопировать содержимое ниже)
  # cat jwt_public_key.pem (скопировать содержимое ниже)

  JWT_PRIVATE_KEY: |
    -----BEGIN PRIVATE KEY-----
    REPLACE_WITH_ACTUAL_PRIVATE_KEY_CONTENT
    GENERATE_NEW_KEY_PAIR_FOR_PRODUCTION
    -----END PRIVATE KEY-----

  JWT_PUBLIC_KEY: |
    -----BEGIN PUBLIC KEY-----
    REPLACE_WITH_ACTUAL_PUBLIC_KEY_CONTENT
    GENERATE_NEW_KEY_PAIR_FOR_PRODUCTION
    -----END PUBLIC KEY-----

  # JWT Configuration
  JWT_ALGORITHM: "RS256"
  JWT_ACCESS_TOKEN_EXPIRE_MINUTES: "30"
  JWT_REFRESH_TOKEN_EXPIRE_DAYS: "7"

  # Logging Configuration
  LOG_LEVEL: "INFO"  # DEBUG, INFO, WARNING, ERROR, CRITICAL
  LOG_FORMAT: "json"  # ОБЯЗАТЕЛЬНО json для production

---
# Опциональный Secret для TLS сертификатов Ingress
# Использовать cert-manager для автоматического управления сертификатами
apiVersion: v1
kind: Secret
metadata:
  name: artstore-tls
  namespace: artstore
type: kubernetes.io/tls
stringData:
  tls.crt: |
    -----BEGIN CERTIFICATE-----
    REPLACE_WITH_ACTUAL_TLS_CERTIFICATE
    -----END CERTIFICATE-----
  tls.key: |
    -----BEGIN PRIVATE KEY-----
    REPLACE_WITH_ACTUAL_TLS_PRIVATE_KEY
    -----END PRIVATE KEY-----
